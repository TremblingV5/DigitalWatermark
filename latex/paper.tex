% -*- coding: UTF-8 -*-
%!TEX program = xelatex
\documentclass[a4paper,zihao=5,UTF8]{ctexart}

% è®¾ç½®sectionæ ‡é¢˜å±…å·¦
\CTEXsetup[format={\heiti\zihao{3}\bfseries}]{section}
\setcounter{section}{-1}
\CTEXsetup[format={\heiti\zihao{-3}\bfseries}]{subsection}
\usepackage{array}
\usepackage{ctex}
\usepackage{multicol}
%æ•°å­¦åŒ…ï¼Œè¿™é‡Œæ²¡ç”¨åˆ°
\usepackage{amsmath}
\usepackage{indentfirst}
%æ·»åŠ ä½œè€…ä¿¡æ¯
\usepackage{authblk}
\usepackage{graphicx}
\usepackage{float}
\usepackage[dvipsnames]{xcolor}%é¢œè‰²å®åŒ…

% ä¸‰çº¿è¡¨
\usepackage{booktabs}
\usepackage{longtable}
\usepackage{lscape}

\usepackage{titletoc}
\usepackage{setspace}
\usepackage{booktabs}
%è®¾ç½®æ ‡é¢˜å­—ä½“ï¼Œå› ä¸ºsectionä¸€èˆ¬ä¸ºç²—ä½“ã€‚
\usepackage{fontspec}
\setCJKmainfont[BoldFont=KaiTi]{SimSun}

\usepackage{titlesec}
\usepackage{float}
\usepackage{appendix}
% \newfontfamily\sectionef{heiti}
\usepackage{graphicx}
\graphicspath{ {./figures/} }
\titleformat*{\section}{\zihao{3}\heiti}
\titleformat*{\subsection}{\zihao{-3}\bfseries\heiti}
\titleformat*{\subsubsection}{\large}

%é¡µç æ ¼å¼
\pagestyle{plain}
%è®¾ç½®ä¹¦ç­¾	
\usepackage[bookmarks=true,colorlinks,linkcolor=black]{hyperref}

% \usepackage[dvipsnames]{xcolor}%é¢œè‰²å®åŒ…
\usepackage{listings}

% \lstset{
%     language = Python,
%     backgroundcolor = \color{yellow!10}ï¼Œ   % èƒŒæ™¯è‰²ï¼šæ·¡é»„
%     basicstyle = \small\ttfamilyï¼Œ          % åŸºæœ¬æ ·å¼ + å°å·å­—ä½“
%     rulesepcolor= \color{gray}ï¼Œ            % ä»£ç å—è¾¹æ¡†é¢œè‰²
%     breaklines = trueï¼Œ                 % ä»£ç è¿‡é•¿åˆ™æ¢è¡Œ
%     %numbers = leftï¼Œ                    % è¡Œå·åœ¨å·¦ä¾§æ˜¾ç¤º
%     %numberstyle = \smallï¼Œ              % è¡Œå·å­—ä½“
%     keywordstyle = \color{blue}ï¼Œ           % å…³é”®å­—é¢œè‰²
%     commentstyle =\color{green!100}ï¼Œ       % æ³¨é‡Šé¢œè‰²
%     stringstyle = \color{red!100}ï¼Œ         % å­—ç¬¦ä¸²é¢œè‰²
%     frame =  tbï¼Œ                 % ç”¨ï¼ˆå¸¦å½±å­æ•ˆæœï¼‰æ–¹æ¡†æ¡†ä½ä»£ç å—
%     showspaces = falseï¼Œ                % ä¸æ˜¾ç¤ºç©ºæ ¼
%     columns = fixedï¼Œ                   % å­—é—´è·å›ºå®š
% }

%è‹±æ–‡æ‘˜è¦
\newcommand{\enabstractname}{}
\newenvironment{enabstract}{%
\quotation
	\par\small
	\mbox{}\hfill{\bfseries \enabstractname}\hfill\mbox{}\par
	\vskip 2.5ex}{\par\vskip 2.5ex} 

\title{\Large\CJKfamily{zhkai} æ•°å­—æ°´å°ç®—æ³•æ¨¡å—çš„å®ç°}	
\author{
        \zihao{-4}
        è¾›æ­£é\quad 
        éŸ¦ç»§ç¨‹\quad 
        ä¿èª\quad 
        é™ˆç«¹ç­ \quad 
    }
\affil{ï¼ˆ
    \zihao{-5}
    {ä¸Šæµ·ç¬¬äºŒå·¥ä¸šå¤§å­¦\quad{}ä¸Šæµ·\quad{}201209} 
ï¼‰}					   								
\date{}

% é¡µè¾¹è·
\usepackage{geometry}
\geometry{a4paper,scale=0.9}

\begin{document}
	\maketitle
	{
		% \footnotetext[1]{æ¸…åå¤§å­¦åœ¨è¯»ç ”ç©¶ç”Ÿã€‚
		% }
	}
    
    \noindent\zihao{-5}\heiti{%ä¸å¹³è¡¡åŒæ 
        \>æ‘˜è¦ï¼š
    }
    \zihao{-5}\songti{
        é’ˆå¯¹å½“å‰æ•°å­—åª’ä½“ä¿¡æ¯å—å‰½çªƒã€ç›—ç”¨ç­‰ä¾µæƒè¡Œä¸ºçš„ä¸æ–­å‘ç”Ÿï¼Œæ•°å­—æ°´å°æŠ€æœ¯ä¾¿æ˜¯ä¸€é¡¹ç”±æ­¤åº”
        è¿è€Œç”Ÿçš„æ–°å…´æŠ€æœ¯ã€‚ä¸ºäº†å°†å¾…åŠ å¯†æ–‡ä»¶éšè—å…¥è½½ä½“å›¾åƒï¼Œå¹¶å…·å¤‡å®‰å…¨æ€§ã€é«˜å®¹é‡ã€é²æ£’æ€§
        ç­‰ç‰¹æ€§ï¼Œå®ç°äº†æœ€ä½æœ‰æ•ˆä½ç®—æ³•ã€éšæœºé—´éš”ç®—æ³•å’ŒåŒºåŸŸæ ¡éªŒä½ç®—æ³•ã€‚æœ¬æ–‡æ¦‚è¿°äº†æ•°å­—æ°´å°ã€
        æ•°å­—æ°´å°çš„è¯„ä»·æŒ‡æ ‡ï¼Œç®€è¿°äº†æœ€ä½æœ‰æ•ˆä½ç®—æ³•ã€éšæœºé—´éš”ç®—æ³•å’ŒåŒºåŸŸæ ¡éªŒä½ç®—æ³•çš„å®ç°æ–¹å¼ï¼Œ
        å¹¶é€šè¿‡PythonåŠå…¶åº“opencv2ç­‰ç¼–å†™äº†è¯¥ç®—æ³•ï¼Œå¹¶é€šè¿‡å³°å€¼ä¿¡å™ªæ¯”ï¼ˆPSNRï¼‰å’Œç»“æ„ç›¸ä¼¼æ€§ï¼ˆSSIMï¼‰
        å¯¹åŠ å¯†å‰åçš„è½½ä½“å›¾åƒè¿›è¡Œè¯„ä»·ï¼Œè®¡ç®—äº†ç®—æ³•åŠ å¯†çš„å®¹é‡ï¼Œæœ€ä½æœ‰æ•ˆä½ç®—æ³•ä¸‹ï¼Œä¸€å¼ è½½ä½“å›¾åƒçš„å®¹é‡çº¦ä¸º5ä»½åŠ å¯†æ–‡ä»¶ï¼Œéšæœºé—´éš”ç®—æ³•å’ŒåŒºåŸŸæ ¡éªŒä½ç®—æ³•ä¸‹
        ä¸€å¼ è½½ä½“å›¾åƒçš„å®¹é‡ä¸º1ä»½åŠ å¯†æ–‡ä»¶ã€‚è¯¥ç®—æ³•è¿›è¡ŒåŠ å¯†çš„é€”å¾„ä¸ºä¿®æ”¹å›¾ç‰‡
        çš„åƒç´ ä½ï¼Œæ•…å°†å›¾ç‰‡æ ¼å¼ä¿®æ”¹ä¸ºPNGä¾ç„¶å¯ä»¥æ­£å¸¸åŠ å¯†ï¼Œå…·å¤‡ä¸€å®šçš„é²æ£’æ€§ã€‚
    }

    \noindent\zihao{-5}\heiti{
        å…³é”®å­—ï¼š
    }
    \zihao{-5}\songti{
        æ•°å­—æ°´å°ï¼›æœ€ä½æœ‰æ•ˆä½ç®—æ³•ï¼›éšæœºé—´éš”ç®—æ³•ï¼›åŒºåŸŸæ ¡éªŒä½ç®—æ³•ï¼›
    }

\section{å¼•è¨€}

éšç€äº’è”ç½‘å’Œç§»åŠ¨äº’è”ç½‘æŠ€æœ¯çš„å‘å±•ï¼Œä½¿å¾—ä¿¡æ¯çš„å‘å¸ƒå’Œä¼ è¾“å®ç°äº†â€œæ•°å­—åŒ–â€
å’Œâ€œç½‘ç»œåŒ–â€ï¼Œä»¥æ•°å­—å›¾
åƒä¸ºä»£è¡¨çš„æ•°å­—ä¿¡æ¯çš„ä¼ é€’å’Œå­˜å–æ¸ é“å¾—åˆ°äº†æ‰©å±•ï¼ŒåŒæ—¶ä¹Ÿå¤§å¤§æé«˜äº†æ•°å­—ä¿¡æ¯è¡¨è¾¾çš„æ•ˆç‡å’Œå‡†ç¡®æ€§ã€‚
ä½†æ˜¯ï¼Œè¿™äº›æ•°å­—ä¿¡æ¯å¾ˆå®¹æ˜“å€ŸåŠ©äº’è”ç½‘è¢«å¤åˆ¶ã€å¤„ç†ã€ä¼ æ’­å’Œå…¬å¼€ï¼Œå„ç±»æ•°å­—åª’ä½“çš„ä¼ æ’­è¾¾åˆ°äº†å‰æ‰€æœªæœ‰
çš„æ·±åº¦å’Œå¹¿åº¦ï¼Œå¼•å‘å‡ºæ•°å­—ä¿¡æ¯ä¼ è¾“çš„å®‰å…¨é—®é¢˜å’Œæ•°å­—äº§å“çš„ç‰ˆæƒä¿æŠ¤é—®é¢˜ã€‚ è¿‘äº›å¹´å…³äºç½‘ç»œä¼ æ’­å†…å®¹
çš„ç‰ˆæƒçº çº·ä¸æ–­å¢åŠ ï¼Œä¾µçŠ¯ä½œå“ä½œè€…çš„åˆæ³•ç‰ˆæƒçš„æ¡ˆä»¶è¶Šæ¥è¶Šå¤šã€‚åœ¨äº’è”ç½‘ç¯å¢ƒä¸­å¦‚ä½•æœ‰æ•ˆä¿æŠ¤ç‰ˆæƒï¼Œå¦‚
ä½•æé«˜æ°´å°ä¿¡æ¯çš„å®‰å…¨æ€§ï¼Œå·²æˆä¸ºä¿¡æ¯å®‰å…¨å’Œä¿¡æ¯éšè—é¢†åŸŸçš„çƒ­é—¨è¯¾é¢˜ã€‚

èµ·åˆï¼Œä¿¡æ¯å®‰å…¨ä¸“å®¶é€šè¿‡åˆ©ç”¨åˆ©ç”¨ç§é’¥æˆ–å…¬é’¥å°†æ˜æ–‡ä¿¡æ¯åŠ å¯†ä¸ºå…¶ä»–äººæ— æ³•è¯†åˆ«çš„å¯†æ–‡ä¿¡æ¯ï¼Œè§£å¯†å¯†æ–‡
éœ€è¦å¯¹åº”çš„å¯†é’¥ã€‚å¦ä¸€ç§æ•°å­—ç­¾åæŠ€æœ¯æ˜¯é€šè¿‡ç§é’¥å¯¹æ¯ä¸ªæ¶ˆæ¯è¿›è¡Œç­¾åã€‚ä½†æ˜¯éšç€æ•°æ®çš„å¢åŠ ï¼Œç­¾åæ•°é‡ä¹Ÿ
éšä¹‹å¢åŠ ï¼Œå› æ­¤ä¹Ÿä¸ºæ•°å­—äº§å“çš„ä¼ è¾“å¸¦æ¥è¯¸å¤šä¸ä¾¿ã€‚éšç€ç§‘å­¦æŠ€æœ¯çš„å‘å±•ï¼Œæ–°çš„æ”»å‡»æŠ€æœ¯ä¹Ÿåœ¨ä¸æ–­æ¶Œç°ï¼Œä¼ 
ç»Ÿçš„åŠ å¯†æŠ€æœ¯å’Œæ•°å­—ç­¾åæŠ€æœ¯å·²ç»ä¸èƒ½æ»¡è¶³æ•°å­—ä¿¡æ¯å®‰å…¨çš„éœ€è¦ï¼Œæ€¥éœ€æ–°çš„æŠ€æœ¯å¯¹æ•°å­—ä¿¡æ¯è¿›è¡Œæ›´åŠ å®‰å…¨çš„
ä¿æŠ¤ã€‚

éšç€ç ”ç©¶çš„ä¸æ–­æ·±å…¥ï¼Œæ•°å­—æ°´å°æŠ€æœ¯ä½œä¸ºä¸€ç§æ–°å‹ä¿¡æ¯éšè—æŠ€æœ¯é—®ä¸–ã€‚è¿™ç§æŠ€æœ¯å¯ä»¥ä¸ºè§£å¯†åçš„æ•°
æ®æä¾›è¿›ä¸€æ­¥çš„ä¿æŠ¤ï¼Œè€Œä¸”å¯ä»¥åœ¨åŸå§‹è½½ä½“ä¸­åµŒå…¥å¤§é‡çš„æ°´å°ä¿¡æ¯ã€‚æ•°å­—æ°´å°æŠ€æœ¯ä¸»è¦ç”¨äºæ•°å­—å›¾åƒçš„
ç‰ˆæƒä¿æŠ¤å’Œå®Œæ•´æ€§è®¤è¯ï¼Œä½œä¸ºä¸€ç§ä¿æŠ¤æ•°å­—å›¾åƒç‰ˆæƒçš„ä¸»è¦æŠ€æœ¯ï¼Œé€šè¿‡æ°´å°ç®—æ³•å°†ç‰ˆæƒä¿¡æ¯ä»¥ä¸€ç§éšè”½
çš„å½¢å¼åµŒå…¥åˆ°å®¿ä¸»å›¾åƒã€‚åœ¨æ•°å­—å›¾åƒç‰ˆæƒå—åˆ°ä¾µçŠ¯æ—¶ï¼Œèƒ½å¤Ÿé€šè¿‡æ°´å°æå–ç®—æ³•å°†ç‰ˆæƒä¿¡æ¯æå–å‡ºæ¥ï¼Œä½œä¸º
æ•°å­—å›¾åƒå½’å±çš„ä¸»è¦è¯æ®ã€‚

æ•°å­—æ°´å°æŠ€æœ¯åœ¨å®é™…ä½¿ç”¨ä¸­å°†ä¼šé¢ä¸´ä¸€äº›æ”»å‡»å’Œç ´åï¼Œä¸ºäº†é˜²æ­¢è½½ä½“å›¾ç‰‡ä¸Šçš„ç§˜å¯†ä¿¡æ¯è¢«ç ´åï¼Œæ‰€ä»¥æ•°å­—
æ°´å°ç®—æ³•å¿…é¡»å…·æœ‰å®‰å…¨æ€§ã€é²æ£’æ€§ç­‰ç‰¹æ€§ï¼Œéœ€è¦éš¾ä»¥è®©æ”»å‡»è€…å‘ç°è½½ä½“å›¾ç‰‡ä¸Šè—åŒ¿äº†å…·ä½“çš„ä¿¡æ¯ã€‚

\section{æ¦‚è¿°}

\subsection{æ•°å­—æ°´å°}

æ•°å­—æ°´å°ï¼ˆDigital Watermarkï¼‰ï¼Œæ˜¯å°†ç‰¹å®šçš„æ•°å­—ä¿¡å·åµŒå…¥æ•°å­—äº§å“ä¸­ä¿æŠ¤æ•°å­—äº§å“ç‰ˆæƒã€
å®Œæ•´æ€§ã€é˜²å¤åˆ¶æˆ–å»å‘è¿½è¸ªçš„æŠ€æœ¯ã€‚

æ•°å­—æ°´å°çš„ç”Ÿæˆé€šå¸¸æœ‰ä¸¤ç§ï¼Œæ— å®é™…æ„ä¹‰çš„éšæœºåºåˆ—æ°´å°å’Œæœ‰å®é™…æ„ä¹‰çš„æ°´å°ã€‚æ— å®é™…
æ„ä¹‰çš„æ°´å°å¸¸å¸¸é€‰ç”¨ä¼ªéšæœºåºåˆ—ä½œä¸ºæ•°å­—æ°´å°ï¼Œä¸èƒ½è¡¨ç¤ºå…·ä½“çš„ã€ç‰¹å®šçš„ä¿¡æ¯ï¼Œå…¶æœ€å¤§çš„ç‰¹
ç‚¹æ˜¯æ¯”è¾ƒéš¾ä¼ªé€ ï¼Œå¯ä»¥ä¿è¯æ°´å°çš„å®‰å…¨æ€§ã€‚ä½†å®é™…æ— æ„ä¹‰çš„æ°´å°åœ¨æ£€æµ‹æ—¶åªèƒ½åˆ¤æ–­å‡ºå¾…æ£€éªŒ
çš„å›¾åƒä¸­â€œæœ‰â€ã€â€œæ— â€æ°´å°ä¸¤ç§ç»“è®ºï¼Œåœ¨ç”Ÿæ´»ä¸­ä½¿ç”¨èµ·æ¥æœ‰ä¸€å®šçš„å±€é™æ€§ã€‚æœ‰å®é™…æ„ä¹‰çš„
æ°´å°æ°´å°å¯ä»¥æ˜¯æ–‡å­—ã€æŒ‡çº¹ã€å›¾åƒã€éŸ³é¢‘ç­‰ç­‰ï¼Œå®ƒæœ¬èº«å°±æœ‰å®é™…çš„å«ä¹‰ï¼Œåˆä¸å®¹æ˜“è¢«ä¼ªé€ å’Œ
ç¯¡æ”¹ï¼Œå¯ä»¥æä¾›æ¯”æ— æ„ä¹‰æ°´å°æ›´å¤šçš„ä¿¡æ¯é‡ï¼ŒåŒæ—¶å¯¹æ°´å°çš„åµŒå…¥å’Œæ£€æµ‹ä¹Ÿæœ‰è¾ƒé«˜çš„è¦æ±‚ã€‚

æ•°å­—æ°´å°çš„åµŒå…¥æ˜¯æŒ‡æŒ‰ç…§æŸç§ç‰¹å®šçš„åµŒå…¥ç®—æ³•å°†ç”Ÿæˆçš„æ°´å°ä¿¡æ¯åŠ è½½åˆ°è½½ä½“ï¼ˆå›¾åƒã€éŸ³é¢‘ã€è§†
é¢‘ç­‰ï¼‰ä¸­ã€‚æ•°å­—æ°´å°çš„æå–åˆ™æ˜¯æŒ‡åœ¨æŸç§åœºåˆçš„éœ€è¦æ—¶èƒ½å¤Ÿå°†æ•°å­—æ°´å°æœ‰æ•ˆåœ°åˆ†ç¦»ä¸æå–
å‡ºæ¥ï¼Œä»¥ä¾¿è¯æ˜è¯¥æ•°å­—äº§å“çš„ç‰ˆæƒå½’å±æ–¹æˆ–è€…è¯†åˆ«ç‰ˆæƒæ‰€æœ‰è€…çš„èº«ä»½ã€‚

æ•°å­—æ°´å°é€šå¸¸è¢«è¦æ±‚å…·æœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š
    
1. é€æ˜æ€§

    æ°´å°çš„é€æ˜æ€§ä¸»è¦æŒ‡æ•°å­—å›¾åƒåµŒå…¥æ°´å°ä¿¡æ¯åä¸åµŒå…¥ä¹‹å‰åœ¨äººçœ¼è§†è§‰ä¸Šæ²¡æœ‰å‘ç”Ÿæ˜æ˜¾å˜åŒ–ï¼Œä¹Ÿå°±æ˜¯
å®¿ä¸»å›¾åƒä¸å«æ°´å°å›¾åƒå¯¹è§‚å¯Ÿè€…çš„è§†è§‰ç³»ç»Ÿæ˜¯ä¸å¯å¯Ÿè§‰çš„ã€‚ å¦å¤–ï¼Œé€æ˜æ€§ä¹Ÿè¡¨ç°ä¸ºå³ä½¿ç”¨ç»Ÿè®¡æ–¹æ³•ä¹Ÿä¸
èƒ½æ¢å¤å‡ºåŸå§‹æ°´å°ã€‚è¿™é‡Œéœ€è¦æŒ‡å‡ºçš„æ˜¯ï¼Œé€æ˜æ€§æ˜¯ç›¸å¯¹äºè¢«ä¿æŠ¤æ•°å­—å›¾åƒçš„ä½¿ç”¨è€Œè¨€ï¼Œå³åŠ åœ¨å›¾åƒä¸Šçš„æ°´
å°ä¸åº”å¹²æ‰°å›¾åƒçš„è§†è§‰æ¬£èµæ•ˆæœï¼Œä½†ä¹Ÿå¹¶ä¸æ˜¯ä¸å¯è§ã€‚

2. é²æ£’æ€§

    é²æ£’æ€§æŒ‡å«æ°´å°å›¾åƒåœ¨å—åˆ°æ”»å‡»åä»ç„¶å¯ä»¥ä»ä¸­æå–å‡ºæ°´å°ä¿¡æ¯ï¼Œä»èƒ½ä¿æŒå…¶å®Œæ•´æ€§å’Œè®¤è¯çœŸå®æ€§ã€‚ 
å¸¸è§çš„å¯¹å›¾åƒçš„æ”»å‡»æœ‰æ»¤æ³¢ã€å‹ç¼©ã€æ—‹è½¬ã€å¹³ç§»ç­‰ã€‚é€æ˜æ€§å’Œé²æ£’æ€§æ˜¯æ•°å­—å›¾åƒæ°´å°çš„ä¸¤ä¸ªé‡è¦ç‰¹æ€§ï¼Œæ°´
å°æ—¢è¦å…·å¤‡éšè”½æ€§ï¼Œåˆè¦å…·æœ‰ä¸€å®šçš„é²æ£’æ€§ã€‚ä¸»è§‚ä¸Šè®²ï¼Œç†æƒ³çš„æ°´å°ç®—æ³•æ—¢èƒ½éšè—å¤§é‡çš„æ°´å°æ•°æ®ï¼Œåˆå¯
ä»¥æŠµæŠ—å„ç§æ”»å‡»ã€‚
    
3. å®‰å…¨æ€§

    å®‰å…¨æ€§è¡¨ç°ä¸ºæ°´å°èƒ½å¤ŸæŠµæŠ—æ¶æ„æ”»å‡»çš„èƒ½åŠ›ã€‚ä¸€æ–¹é¢ï¼Œæ°´å°çš„åµŒå…¥ç®—æ³•å’Œæå–ç®—æ³•æ¡†æ¶æ˜¯ç§˜å¯†çš„ï¼ŒåµŒ
å…¥çš„æ•°å­—æ°´å°ä¿¡æ¯æ˜¯åˆ©ç”¨å¯†é’¥ç»è¿‡åŠ å¯†ç®—æ³•å¤„ç†è¿‡çš„ã€‚å¦ä¸€æ–¹é¢ï¼ŒåµŒå…¥çš„æ•°å­—æ°´å°ç»Ÿè®¡ä¸Šæ˜¯ä¸å¯æ£€æµ‹çš„ï¼Œ
éæˆæƒç”¨æˆ·æ— æ³•æ£€æµ‹å’Œç ´åæ°´å°ã€‚åµŒå…¥æ°´å°çš„æ•°å­—å›¾åƒé­å—æ¶æ„æ”»å‡»åæ°´å°ä¿¡æ¯ä»ä¼šä¸€ç›´å­˜åœ¨ï¼Œç›´åˆ°å›¾
åƒä¸¥é‡å¤±çœŸï¼Œä¸§å¤±ä½¿ç”¨ä»·å€¼ã€‚

\subsection{è¯„ä»·æ–¹å¼}

æœ¬æ–‡å¯¹æ•°å­—æ°´å°ç®—æ³•é‡‡ç”¨çš„è¯„ä»·æŒ‡æ ‡å¦‚ä¸‹ï¼š

1. å³°å€¼ä¿¡å™ªæ¯”

å³°å€¼ä¿¡å™ªæ¯”ï¼ˆPeak signal-to-noise ratio, PSNRï¼‰ä¸»è¦ç”¨äºè¡¡é‡åµŒå…¥æ°´å°åçš„å›¾åƒä¸åŸå§‹å›¾åƒä¹‹é—´çš„
å¤±çœŸç¨‹åº¦ï¼Œæ˜¯ä½¿ç”¨æœ€ä¸ºå¹¿æ³›çš„ä¸€ç§å›¾åƒè´¨é‡è¯„ä»·æŒ‡æ ‡ï¼Œ
ç”¨æ¥è¯„ä¼°å›¾åƒçš„ä¿çœŸæ€§ï¼Œé€šè¿‡MSEè¿›è¡Œå®šä¹‰ï¼Œå¯ä»¥åæ˜ å¯¹åº”åƒç´ ç‚¹é—´çš„è¯¯å·®ï¼Œæ˜¯åŸºäºè¯¯å·®
æ•æ„Ÿçš„å›¾åƒè´¨é‡è¯„ä»·ã€‚

MSE è®¡ç®—æ–¹å¼å¦‚ä¸‹:

$$
MSE = \frac{1}{M * N} \sum_{i=1}^M \sum_{j=1}^N (X(i, j) - Y(i, j))^2
$$

PSNR è®¡ç®—æ–¹å¼å¦‚ä¸‹

$$
PSNR = 10 * log_{10} (\frac{MAX^2}{MSE}) = 20 * log_{10} (\frac{MAX}{\sqrt{MSE}})
$$

å…¶ä¸­MSEè¡¨ç¤ºå½“å‰å›¾åƒXå’Œå‚è€ƒå›¾åƒYçš„å‡æ–¹è¯¯å·®ï¼Œ$N * M$ä¸ºå›¾åƒçš„åˆ†è¾¨ç‡ï¼ŒMAXæ˜¯è¡¨ç¤º
å›¾åƒçš„æœ€å¤§åƒç´ å€¼ï¼Œæ¯”å¦‚æ¯ä¸ªåƒç´ ç‚¹ç”¨8ä½è¡¨ç¤ºï¼Œé‚£ä¹ˆMAXä¸º255ã€‚PSNRçš„å•ä½ä¸ºdBï¼ŒPSNR
å€¼è¶Šå¤§ï¼Œæ„å‘³ç€å›¾åƒçš„å¤±çœŸè¶Šå°‘ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒPSNRå€¼è¾ƒé«˜çš„å›¾è±¡è´¨é‡ç›¸å¯¹è¾ƒé«˜ï¼Œå½“PSNR
å€¼å¤§äº25 dBæ—¶ï¼Œå›¾è±¡è´¨é‡çš„å·®å¼‚å¹¶ä¸æ˜æ˜¾ï¼›å½“PSNRå€¼å¤§äº35æˆ–40dBæ—¶ï¼Œåˆ™äººçœ¼åˆ†è¾¨ä¸å‡º
ä»»ä½•å·®å¼‚ã€‚

2. ç»“æ„ç›¸ä¼¼æ€§

ç»“æ„ç›¸ä¼¼æ€§ï¼ˆStructural Similarityï¼Œ SSIMï¼‰ï¼Œæ˜¯ä¸€ç§è¡¡é‡å›¾åƒç›¸ä¼¼åº¦çš„æŒ‡æ ‡ï¼Œ
åˆ†åˆ«ä»äº®åº¦ã€å¯¹æ¯”åº¦ã€ç»“æ„ä¸‰æ–¹é¢åº¦
é‡ç›¸ä¼¼æ€§ã€‚
ç»™å®šå›¾åƒXå’ŒYç»“æ„ç›¸ä¼¼æ€§å¯æŒ‰ç…§ä»¥ä¸‹æ–¹å¼æ±‚å‡ºï¼š

$$
SSIM = \frac{(2\mu_x\mu_y + c_1)(2\sigma_{xy} + c_2)}{(\mu_x^2 + \mu_y^2 + c_1)(\sigma_x^2 + \sigma_y^2 + c_2)}
$$

å…¶ä¸­ï¼Œ$\mu_x, \mu_y$åˆ†åˆ«è¡¨ç¤ºå›¾åƒXå’ŒYçš„å‡å€¼ï¼Œ$\sigma_x^2, \sigma_y^2$åˆ†åˆ«è¡¨ç¤ºå›¾åƒXå’ŒYçš„æ–¹å·®ï¼Œ
$\sigma_{xy}$è¡¨ç¤º
å›¾åƒXå’ŒYçš„åæ–¹å·®ã€‚$c_1, c_2$ä¸ºå¸¸æ•°ï¼Œé€šå¸¸å–$c_1 = (k_1 * L)^2, c_2 = (k_2 * L)^2, k_1=0.01, k_2=0.03$
Læ˜¯åƒç´ å€¼çš„åŠ¨æ€èŒƒå›´ï¼ˆå¯¹äºç°åº¦å›¾åƒï¼ŒLä¸º255ï¼‰ã€‚SSIMçš„å–å€¼èŒƒå›´ä¸º[-1,1]ã€‚å½“ä¸¤å¼ å›¾
åƒä¸€æ ·æ—¶ï¼ŒSSIMçš„å€¼ç­‰äº1ã€‚
ç»“æ„ç›¸ä¼¼æ€§å‚æ•°åˆ†åˆ«ç”¨å‡å€¼ã€æ ‡å‡†å·®å’Œåæ–¹å·®æ¥ä¼°è®¡å›¾åƒçš„äº®åº¦ã€å¯¹æ¯”åº¦ä»¥åŠç»“æ„ç›¸ä¼¼
ç¨‹åº¦ã€‚ç”±äºSSIMçš„å‡ºè‰²è¡¨ç°ï¼ŒSSIMå·²ç»åœ¨è¶…åˆ†è¾¨ç‡ã€å›¾åƒå»å™ªä¸­éƒ½æœ‰å¹¿æ³›çš„åº”ç”¨ã€‚

3. æ±‰æ˜è·ç¦»

    æ±‰æ˜è·ç¦»èƒ½å¤Ÿåæ˜ åºåˆ—é—´çš„ç›¸ä¼¼ç¨‹åº¦ï¼Œè¿›è€Œæä¾›åºåˆ—ç›¸ä¼¼ç¨‹åº¦çš„å®¢è§‚ä¾æ®ã€‚è®¾é•¿åº¦ä¸ºNçš„äºŒå€¼åºåˆ—Vå’ŒUï¼Œ
$V=\{v_0, v_1, ..., v_{N-1}\}$ï¼Œ$U=\{u_0, u_1, ..., u_{N-1}\}$, $d(V, U) = \sum_{i=0}^{N-1}(v_i \bigoplus u_i)$ã€‚
åˆ™d(V,U)ç§°ä¸ºä¸¤ä¸ªåºåˆ—Vå’ŒUçš„æ±‰æ˜è·ç¦»ï¼Œå®ƒè¡¨ç¤ºVå’ŒUç›¸åº”å…ƒç´ 
ä¸ç­‰çš„ä¸ªæ•°ã€‚è®¾Vä¸­ä¸¤ä¸ªå…ƒç´ $v_i$å’Œ$v_j$åœ¨åºåˆ—ä¸­çš„ä½ç½®åˆ†åˆ«ä¸ºi,jï¼Œ0â‰¤iï¼œjï¼œNï¼Œå…¶
ä½ç½®é—´è·è®°ä¸ºkï¼Œ
k=j-iã€‚å¯¹æ‰€æœ‰ä½ç½®é—´è·ä¸ºkçš„ä¸¤ä¸ªå…ƒç´ çš„å¼‚æˆ–å€¼æ±‚å’Œï¼Œç»“æœç§°ä¹‹ä¸ºä½ç½®é—´è·kçš„
æ±‰æ˜è·ç¦»ï¼Œè®°ä¸º$D_k, D_k=\sum_{i=0}^{N-k-1}v_i \bigoplus v_{j+k}$ã€‚å¯¹
æ‰€æœ‰kï¼ˆ1â‰¤kï¼œNï¼‰è®¡ç®—å…¶$D_k$ï¼Œç§°ä¸ºå¯¹åºåˆ—è¿›è¡Œæ±‰æ˜è·ç¦»ç»Ÿè®¡ã€‚

4. å®¹é‡

ä½¿ç”¨ç›¸åŒçš„è½½ä½“å›¾ç‰‡å’Œç›¸åŒçš„ç§˜å¯†æ–‡ä»¶å¯¹ç®—æ³•è¿›è¡Œæµ‹è¯•ï¼Œè®¡ç®—åŠ å¯†ç›¸åŒæ•°é‡ç§˜å¯†æ–‡ä»¶æ‰€
éœ€è¦çš„è½½ä½“å›¾ç‰‡æ•°é‡

5. å¥å£®æ€§

å¯¹å›¾ç‰‡è¿›è¡Œæ”»å‡»ï¼Œå¦‚æ›´æ”¹å›¾ç‰‡æ ¼å¼ã€å¯¹å›¾åƒè¿›è¡Œç¼©æ”¾ï¼Œå†è¿›è¡Œè§£å¯†ï¼ŒæŸ¥çœ‹æ˜¯å¦ä¾ç„¶å¯ä»¥
è§£å¯†æˆåŠŸã€‚

\section{ç®—æ³•å®ç°}

\subsection{æœ€ä½æœ‰æ•ˆä½ç®—æ³•}

    æœ€ä½æœ‰æ•ˆä½ï¼ˆLeast Significant Bitsï¼ŒLSBï¼‰ç®—æ³•ï¼Œæœ€ä½æœ‰æ•ˆä½åˆç§°æœ€ä¸æ˜¾è‘—ä½ï¼Œ
æ˜¯æŒ‡æ•°å­—å›¾åƒåƒç´ å€¼ç”¨äºŒè¿›åˆ¶è¡¨ç¤ºæ—¶çš„æœ€ä½ä½ã€‚å®ƒåˆ©ç”¨è½½ä½“å¯¹è±¡çš„äºŒè¿›åˆ¶çš„æœ€ä½ä¸€ä½ï¼ˆæˆ–å‡ ä½ï¼‰
æ¥è¿›è¡Œç§˜å¯†ä¿¡æ¯çš„éšè—ã€‚æ°´å°ä¿¡æ¯å’Œåƒç´ å€¼éƒ½æ˜¯äºŒå€¼æ¯”ç‰¹åºåˆ—ï¼Œå¦‚æœç”¨ 8 ä½æ¯”ç‰¹çš„äºŒè¿›åˆ¶è¡¨ç¤º
ç°åº¦å›¾åƒçš„æ¯ä¸€ä¸ªåƒç´ å€¼ï¼Œæ”¹å˜æœ€ä½ä½çš„å€¼ä¸ä¼šå¯¹è§†è§‰æ•ˆæœäº§ç”Ÿæ˜æ˜¾å½±å“ã€‚

LSB ç®—æ³•åµŒå…¥åŸºæœ¬æ­¥éª¤ï¼š

    1ã€å°†è¦éšè—çš„æ°´å°æ–‡æœ¬ä¿¡æ¯çš„è½¬æ¢ä¸ºäºŒè¿›åˆ¶æ•°æ®ï¼›

    2ã€è¯»å…¥è½½ä½“å›¾åƒï¼Œå°†å›¾åƒçŸ©é˜µçš„æ¯ä¸ªåƒç´ è½¬æ¢æˆäºŒè¿›åˆ¶ã€‚ç”¨æ°´å°ä¿¡æ¯çš„äºŒè¿›
åˆ¶æ•°æ®çš„æ¯ä¸€æ¯”ç‰¹ä½æ›¿æ¢ä¸ä¹‹ç›¸å¯¹åº”çš„è½½ä½“å›¾åƒçš„æœ€ä½æœ‰æ•ˆä½ï¼ˆLSB ä½ï¼‰ï¼›

    3ã€å°†è½½ä½“å›¾åƒçš„æ¯ä¸€åƒç´ å†ç”±äºŒè¿›åˆ¶è½¬æ¢ä¸ºåè¿›åˆ¶ï¼Œä»è€Œè·å¾—å«æœ‰æ°´å°ä¿¡æ¯
çš„å›¾åƒã€‚

LSB ç®—æ³•æå–åŸºæœ¬æ­¥éª¤ï¼š

    1ã€å°†åµŒå…¥æ°´å°ä¿¡æ¯çš„è½½ä½“å›¾åƒçš„åƒç´ è½¬æ¢æˆäºŒè¿›åˆ¶ï¼Œä¾æ¬¡å–å‡ºæ¯ä¸€ä¸ªåƒç´ çš„
äºŒè¿›åˆ¶çš„æœ€åä¸€ä½ï¼Œæ‹¼æ¥æˆäºŒè¿›åˆ¶æ•°æ®ã€‚

    2ã€å°†å¾—åˆ°çš„äºŒè¿›åˆ¶æ•°æ®è½¬æ¢æˆæ–‡æœ¬æ•°æ®ï¼Œä¾¿å¯å¾—åˆ°éšè—çš„ä¿¡æ¯ã€‚

    è¿™ç§æå–æ°´å°çš„æ–¹æ³•å±äºç›²æ£€æµ‹ï¼Œå³ä¸éœ€è¦åŸå§‹è½½ä½“å›¾åƒçš„æ•°æ®ä¾¿å¯ä»¥æå–å‡ºå…¨éƒ¨æ°´å°ä¿¡æ¯ã€‚æ­£æ˜¯å› ä¸ºæ
å–ç®—æ³•ç®€å•ï¼Œè¿™ç§æ°´å°å¾ˆå®¹æ˜“è¢«æ¶æ„æå–å‡ºæ¥å¹¶ä¿®æ”¹ä¸ºå…¶ä»–ä¿¡æ¯ã€‚ä¸ºäº†æé«˜æ°´å°çš„å®‰å…¨æ€§ï¼Œåœ¨åµŒå…¥ä¹‹å‰å…ˆ
å¯¹æ°´å°ä¿¡æ¯è¿›è¡ŒåŠ å¯†æˆ–è€…ç½®ä¹±ï¼Œè¿™æ ·åœ¨æ²¡æœ‰å¯†é’¥çš„å‰æä¸‹å°±æ— æ³•å‡†ç¡®è·å–åˆ°æ°´å°ä¿¡æ¯ã€‚

\subsection{éšæœºé—´éš”ç®—æ³•}

éšæœºé—´éš”ç®—æ³•æ˜¯å¯¹LSBç®—æ³•çš„æ”¹è¿›ï¼Œä»LSBæ°´å°ç®—æ³•çš„åµŒå…¥è¿‡ç¨‹æ¥çœ‹ï¼Œç”±äºåµŒå…¥çš„ä½ç½®æ˜¯æœ€ä½æœ‰æ•ˆä½ï¼Œ
æ•…å¯¹å™ªå£°çš„æŠµæŠ—åŠ›è¾ƒå·®ï¼Œå¹¶ä¸”åµŒå…¥
ä½ç½®å›ºå®šï¼Œå®¹æ˜“é­å—æ”»å‡»ã€‚é’ˆå¯¹ä»¥ä¸Šä¸è¶³ï¼Œç ”ç©¶è€…æå‡ºäº†éšæœºé—´éš”ç®—æ³•ï¼Œè¿™æ˜¯ä¸€ç§æ”¹è¿›çš„LSBç®—æ³•ï¼Œ
å‘é€è€…å’Œæ¥å—è€…ä½¿ç”¨åŒä¸€ä¸ªå¯†é’¥ä½œä¸ºéšæœºæ•°ç”Ÿæˆå™¨çš„ç§å­ï¼Œç”Ÿæˆéšæœºåºåˆ— k1,k2,â€¦,kl(m)ï¼Œå¹¶è¿›ä¸€
æ­¥ä»¥æ­¤ç”Ÿæˆéšè—ä½ç½®çš„æŒ‡æ ‡é›†ã€‚æ”¹è¿›åçš„LSBç®—æ³•åœ¨å®‰å…¨æ€§å’Œé²æ£’æ€§ç­‰æ–¹é¢éƒ½å¾—åˆ°äº†æé«˜ã€‚

éšæœºé—´éš”æ³•åµŒå…¥æ°´å°çš„è¿‡ç¨‹ä¸ LSB åŸºæœ¬ç®—æ³•åµŒå…¥æ°´å°çš„è¿‡ç¨‹åŸºæœ¬ç›¸ä¼¼ï¼Œ
éšæœºé—´éš”ç®—æ³•åªæ˜¯ä¸å†æŒ‰é¡ºåºä¾æ¬¡åœ¨è½½ä½“å›¾åƒçš„æ¯ä¸€ä½åƒç´ ä¸­åµŒå…¥äº†ï¼Œè€Œæ˜¯æ ¹æ®éšæœºåºåˆ—å’Œæ­¥é•¿æ¥è·³è·ƒä¸€æ®µé—´éš”ã€‚
éšæœºé—´éš”ç®—æ³•æå–æ°´å°æ˜¯éšæœºé—´éš”æ³•åµŒå…¥æ°´å°çš„é€†æ“ä½œï¼Œæå–ä¿¡æ¯æ—¶ä½¿ç”¨ä¸åµŒå…¥æ—¶ç›¸åŒçš„éšæœºæ•°åºåˆ—ï¼Œå³å¯è·³è·ƒåˆ°
ç›¸åŒçš„ä½ç½®æå–å‡ºéšè—ä¿¡æ¯ã€‚

å› ä¸ºæœ‰éšæœºé—´éš”æ­¥é•¿çš„å­˜åœ¨ï¼Œéšæœºé—´éš”ç®—æ³•éšè—å®¹é‡æ¯”åŸºæœ¬LSBç®—æ³•å°ï¼Œå­˜å‚¨ä¿¡æ¯çš„å®¹é‡$Capactiy=Width*Height/Step$,
å…¶ä¸­Width å’Œ Heightæ˜¯è½½ä½“å›¾ç‰‡çš„é•¿å’Œå®½ï¼ŒWidth*Height æ˜¯è½½ä½“å›¾ç‰‡çš„å¤§å°ã€‚Step ä¸ºéšæœºé—´éš”æ³•çš„æ­¥é•¿ã€‚
ç”±æ­¤å¯è§ï¼Œåœ¨ç»™å®šè½½ä½“å›¾ç‰‡çš„æƒ…å†µä¸‹ï¼Œéšæœºé—´éš”ç®—æ³•çš„æ­¥é•¿ä¸å­˜å‚¨ä¿¡æ¯å®¹é‡æˆåæ¯”ï¼Œå­˜å‚¨ä¿¡æ¯çš„å®¹é‡ä¹Ÿä¸éšæœºé—´éš”ç®—æ³•çš„
æ­¥é•¿æˆåæ¯”ï¼ŒäºŒè€…åŒå‘å½±å“ã€‚

\subsection{åŒºåŸŸæ ¡éªŒä½ç®—æ³•}

åŒºåŸŸæ ¡éªŒä½ç®—æ³•ä¹Ÿæ˜¯ä¸€ç§LSBç®—æ³•çš„æ”¹è¿›ã€‚åˆ©ç”¨åŒºåŸŸæ ¡éªŒä½ç®—æ³•éšè—ä¿¡æ¯ï¼Œ
é¦–å…ˆæŠŠè½½ä½“åˆ†æˆå‡ ä¸ªä¸ç›¸äº¤çš„åŒºåŸŸï¼Œå†åˆ©ç”¨æ ¡éªŒä½åœ¨æ¯ä¸€ä¸ªåŒºåŸŸä¸­éšè—1æ¯”ç‰¹ä¿¡
æ¯ã€‚

åµŒå…¥è¿‡ç¨‹:

    æ ¹æ®è®¾å®šçš„åŒºåŸŸå¤§å°åœ¨è½½ä½“å›¾åƒä¸Šåˆ’åˆ†åŒºåŸŸï¼Œæ ¹æ®è¦åµŒå…¥çš„è½½ä½“ä¿¡æ¯$m_i$ï¼Œè®¡
ç®—æ¯ä¸€ä¸ªåŒºåŸŸçš„å¥‡å¶æ ¡éªŒä½$p(I_i)$ã€‚ä¸€ä¸ªè½½ä½“åŒºåŸŸ$I_i$çš„å¥‡å¶æ ¡éªŒä½å®šä¹‰ä¸º:

$$
p(I_i) = \sum_{j \in I} LSB(C_j) \% 2
$$

    è‹¥$p(I_i)$ä¸ğ‘ä¸€è‡´ï¼Œåˆ™$p(I_i)$å·²ç»éšè—äº†$m_i$ï¼›
    è‹¥$p(I_i)$ä¸$m_i$ä¸ä¸€è‡´ï¼Œåˆ™æ”¹å˜$I_i$ä¸­ä»»æ„ä¸€ä¸ªå…ƒç´ çš„LSBï¼Œä½¿å¾—$p(I_i) = m_i$ã€‚

æå–è¿‡ç¨‹:

æå–è¿‡ç¨‹æ˜¯åµŒå…¥è¿‡ç¨‹çš„é€†è¿‡ç¨‹ï¼Œæ ¹æ®åµŒå…¥æ—¶çš„åŒºåŸŸå¤§å°åœ¨åˆ’åˆ†åŒºåŸŸï¼Œä¾æ¬¡åœ¨
æ¯å—åŒºåŸŸä¸Šè®¡ç®—å…¶å¥‡å¶æ ¡éªŒä½$p(I_i)$å³ä¸ºæœ¬åŒºåŸŸéšè—çš„ä¿¡æ¯ã€‚ç„¶åå°†æ¯ä¸€å—
åŒºåŸŸæå–å‡ºçš„ä¿¡æ¯æ‹¼æ¥åœ¨ä¸€èµ·ï¼Œå³å¯å¾—åˆ°éšè—çš„æ°´å°ä¿¡æ¯ã€‚

åŒºåŸŸæ ¡éªŒä½ç®—æ³•å…·æœ‰å¦‚ä¸‹ä¼˜ç‚¹ï¼š

1ã€è½½ä½“åŒºåŸŸä¸­æœ€å¤šåªéœ€æ›´æ”¹1ä¸ªå…ƒç´ çš„1ä¸ªæ¯”ç‰¹ä½ï¼Œè¿™æ ·ç§˜å¯†æ¶ˆæ¯çš„åµŒå…¥å¯¹è½½
ä½“çš„ç»Ÿè®¡ç‰¹æ€§æ”¹å˜æœ€å°ã€‚æŠµæŠ—è¢«åŠ¨æ”»å‡»çš„å®‰å…¨æ€§è¾ƒé«˜ã€‚

2ã€ä¸åŸºæœ¬LSBç®—æ³•ç›¸æ¯”ï¼Œä¸€ä¸ªåŒºåŸŸä¸­åªä¿®æ”¹ä¸€ä¸ªå…ƒç´ ï¼Œæ°´å°åµŒå…¥å¯¹è½½ä½“å›¾ç‰‡çš„
ç»Ÿè®¡ç‰¹æ€§å½±å“æ›´å°ï¼Œæ›´ä¸æ˜“è¢«å¯Ÿè§‰ã€‚

ä½†æ˜¯ï¼ŒåŒºåŸŸæ ¡éªŒä½ç®—æ³•ä¹Ÿå…·æœ‰å¦‚ä¸‹ç¼ºé™·ï¼š

1ã€éšè—å®¹é‡æ¯”åŸºæœ¬LSBæŠ€æœ¯å°ã€‚è‹¥åŒºåŸŸå¤§å°ä¸ºNï¼Œåˆ™å®¹é‡æ°å¥½ç¼©å°äº†Nå€ã€‚

2ã€ç±»ä¼¼äºLSBæŠ€æœ¯ï¼Œè¯¥æŠ€æœ¯æŠµæŠ—ä¿®æ”¹çš„èƒ½åŠ›ä¾ç„¶å¾ˆè„†å¼±ã€‚

åœ¨ç»™å®šè½½ä½“å›¾ç‰‡çš„æƒ…å†µä¸‹ï¼ŒåŒºåŸŸæ ¡éªŒä½ç®—æ³•çš„åŒºåŸŸå¤§å°ä¸å­˜å‚¨ä¿¡æ¯å®¹é‡æˆåæ¯”ï¼Œå­˜å‚¨ä¿¡æ¯çš„å®¹é‡ä¹Ÿä¸åŒºåŸŸæ ¡éªŒä½ç®—æ³•çš„åŒºåŸŸå¤§å°æˆåæ¯”ï¼ŒäºŒè€…åŒ
å‘å½±å“ã€‚

\section{ç»“æœåˆ†æä¸å¯¹æ¯”}

é€šè¿‡å¯¹ä¸Šè¿°ä¸‰ç§ç®—æ³•çš„å®ç°ï¼ˆè§é™„å½•ï¼‰ä¸è¿è¡Œï¼Œå¾—åˆ°äº†ä¸‰ç§ç®—æ³•å¾—PSNRã€SSIMã€è§£å¯†å‰åæ–‡ä»¶å¾—æ±‰æ˜è·ç¦»ä¸‰
ä¸ªæµ‹è¯•æŒ‡æ ‡ï¼Œå…¶å…·ä½“å€¼å¦‚ä¸‹è¡¨ï¼š

\begin{center}
    \begin{tabular}{cccc}
        \toprule %[2pt]
        ç®—æ³• & PSNR & SSIM & æ±‰æ˜è·ç¦» \\
        \midrule %[2pt]
        LSB & 51.3359 & 0.99514 & 0 \\
        éšæœºé—´éš”ç®—æ³• & 51.4171 & 0.99524 & 0 \\
        åŒºåŸŸæ ¡éªŒä½ç®—æ³• & 51.3723 & 0.99517 & 0 \\
        \bottomrule %[2pt]
    \end{tabular}
\end{center}

ç”±ä»¥ä¸ŠPSNRå’ŒSSIMå€¼å¯çŸ¥ï¼ŒåŠ å¯†åçš„è½½ä½“å›¾åƒç›¸æ¯”äºåŸæ¥çš„å›¾åƒï¼Œå…¶å·®è·éå¸¸å°ï¼Œäººçš„è‚‰çœ¼å°†
éš¾ä»¥åˆ†è¾¨åŠ å¯†å‰åè½½ä½“å›¾åƒçš„åŒºåˆ«ã€‚è®¡ç®—åŠ å¯†å‰åçš„æ–‡ä»¶å°ºå¯¸ï¼ŒåŠ å¯†åçš„æ–‡ä»¶å°ºå¯¸å¢é•¿å°äº5\%ã€‚

å¯¹äºLSBç®—æ³•ï¼ŒåŠ å¯†ä¸€ä»½æ–‡ä»¶ä»…éœ€è¦çº¦0.2å¼ è½½ä½“å›¾ç‰‡ï¼Œéšæœºé—´éš”ç®—æ³•å’ŒåŒºåŸŸæ ¡éªŒä½ç®—æ³•éœ€è¦1å¼ 
å›¾ç‰‡ã€‚ç”±äºä¸‰ç§ç®—æ³•çš„åŸç†å‡ä¸ºä¿®æ”¹å›¾ç‰‡åƒç´ å€¼ï¼Œæ•…å°†æ ¼å¼æ›´æ”¹ä¸ºPNGæ ¼å¼åï¼Œä¾ç„¶å¯ä»¥æ­£å¸¸è§£å¯†ã€‚

\section{åŸºäºRPCæä¾›åŠ è§£å¯†æœåŠ¡}

è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ (Remote Procedure Callï¼ŒRPC) æ˜¯ä¸€ç§è®¡ç®—æœºé€šä¿¡åè®®ã€‚å…è®¸è¿è¡Œåœ¨ä¸€å°è®¡ç®—æœºçš„ç¨‹åºè°ƒç”¨å¦ä¸€ä¸ªåœ°å€ç©ºé—´çš„å­ç¨‹åºï¼ˆä¸€èˆ¬æ˜¯å¼€æ”¾ç½‘ç»œä¸­çš„ä¸€å°è®¡ç®—æœºï¼‰ï¼Œè€Œç¨‹åºå‘˜å°±åƒè°ƒç”¨è°ƒç”¨æœ¬åœ°ç¨‹åºä¸€æ ·ï¼Œæ— éœ€é¢å¤–åšäº¤äº’ç¼–ç¨‹ã€‚

RPCåè®®æœ¬è´¨ä¸Šå®šä¹‰äº†ä¸€ç§é€šä¿¡çš„æµç¨‹ï¼Œè€Œå…·ä½“çš„å®ç°æŠ€æœ¯æ˜¯æ²¡æœ‰çº¦æŸçš„ï¼Œæ¯ä¸€ç§RPCæ¡†æ¶éƒ½æœ‰è‡ªå·±
çš„å®ç°æ–¹å¼ï¼Œæ¯”å¦‚ä½ å¯ä»¥è§„å®šè‡ªå·±çš„RPCè¯·æ±‚/å“åº”åŒ…å«æ¶ˆæ¯å¤´å’Œæ¶ˆæ¯ä½“ï¼Œä½¿ç”¨ gob/json/pb/thrift æ¥
åºåˆ—åŒ–/ååºåˆ—åŒ–æ¶ˆæ¯å†…å®¹ï¼Œä½¿ç”¨ socket/http2 è¿›è¡Œç½‘ç»œé€šä¿¡ï¼Œåªè¦ client å’Œ server æ¶ˆæ¯çš„
å‘é€å’Œè§£æèƒ½å¯¹åº”å³å¯ã€‚

ä¸ºäº†å°†å®ç°çš„ç®—æ³•å°è£…ä¸ºæ¨¡å—åŒ–çš„ç»„ä»¶ï¼Œå¹¶æä¾›æ¥å£è°ƒç”¨æœåŠ¡ï¼Œå¯¹ç®—æ³•åšäº†å¦‚ä¸‹åŸºäºRPCåè®®çš„å°è£…ï¼š

1. IDL å®šä¹‰é€šä¿¡çš„ç»“æ„ä½“ï¼ŒRPC è¯·æ±‚ä½“åŒ…å«éœ€è¦åŠ å¯†çš„äºŒè¿›åˆ¶æ•°æ®ï¼ˆç¼–ç åçš„éœ€è¦åŠ å¯†çš„ python æ–‡ä»¶ï¼‰

2. RPC çš„æœåŠ¡ç«¯æ¥æ”¶åˆ°éœ€åŠ å¯†çš„æ–‡ä»¶åï¼Œå°†å…¶å­˜å…¥ä¸´æ—¶ç›®å½•

3. è°ƒç”¨ç®—æ³•ç”Ÿæˆå›¾ç‰‡ï¼Œå°†pythonæ–‡ä»¶å†…å®¹å­˜å…¥å›¾åƒä¸­

4. RPC å°†å›¾ç‰‡æ•°æ®ä»¥äºŒè¿›åˆ¶å½¢å¼å“åº”ç»™ rpc å®¢æˆ·ç«¯ï¼Œç”±å®¢æˆ·ç«¯ååºåˆ—åŒ–ä¸ºå›¾ç‰‡æ•°æ®

\section{æ€»ç»“}

æœ¬æ–‡æ ¹æ®æœ€ä½æœ‰æ•ˆä½ç®—æ³•ã€éšæœºé—´éš”ç®—æ³•å’ŒåŒºåŸŸæ ¡éªŒä½ç®—æ³•çš„åŸç†è¿›è¡Œä»£ç å®ç°ï¼Œå®Œæˆäº†
é€šè¿‡å„ç®—æ³•è¿›è¡ŒåŠ å¯†å’Œè§£å¯†çš„å·¥ä½œï¼Œå¹¶é€šè¿‡å³°å€¼ä¿¡å™ªæ¯”ï¼ˆPSNRï¼‰å’Œç»“æ„ç›¸ä¼¼æ€§ï¼ˆSSIMï¼‰
å¯¹åŠ å¯†å‰åçš„è½½ä½“å›¾ç‰‡è¿›è¡Œè¯„ä»·ï¼Œç»“è®ºæ˜¯åŠ å¯†å‰åå›¾åƒçš„å·®è·æå°ï¼Œä¸ä¼šè¢«äººè‚‰çœ¼å‘ç°ã€‚
å¯¹è§£å¯†å‰åçš„åŠ å¯†æ–‡ä»¶çš„äºŒè¿›åˆ¶ä½è®¡ç®—äº†æ±‰æ˜è·ç¦»ï¼Œå…¶å€¼å‡ä¸º0ï¼Œè¯´æ˜è§£å¯†å®Œå…¨æ­£ç¡®ã€‚
æœ€ä½æœ‰æ•ˆä½ç®—æ³•ä¸‹ï¼Œä¸€å¼ è½½ä½“å›¾åƒçš„å®¹é‡çº¦ä¸º5ä»½åŠ å¯†æ–‡ä»¶ï¼Œéšæœºé—´éš”ç®—æ³•å’ŒåŒºåŸŸæ ¡éªŒä½ç®—æ³•ä¸‹
ä¸€å¼ è½½ä½“å›¾åƒçš„å®¹é‡ä¸º1ä»½åŠ å¯†æ–‡ä»¶ã€‚è¯¥ç®—æ³•è¿›è¡ŒåŠ å¯†çš„é€”å¾„ä¸ºä¿®æ”¹å›¾ç‰‡
çš„åƒç´ ä½ï¼Œæ•…å°†å›¾ç‰‡æ ¼å¼ä¿®æ”¹ä¸ºPNGä¾ç„¶å¯ä»¥æ­£å¸¸åŠ å¯†ï¼Œå…·å¤‡ä¸€å®šçš„é²æ£’æ€§ã€‚

\appendix

\section{ç­–ç•¥æ¨¡å¼ä¸‹ç®—æ³•è°ƒç”¨ç±»}

\begin{lstlisting}[language=Python]%è®¾ç½®ä¸åŒè¯­è¨€å³å¯ã€‚
kk=2;[mdd,ndd]=size(dd); %åˆ é™¤äº†ä¼šæŠ¥é”™
    
class Handler:
    def __init__(self, carrier_path, secret_path, result_path, method: Method=None) -> None:
        self._method = method

        self._img, self._shape = read_image.read_img_by_cv2(carrier_path)
        self._secret = read_secret.read_secret_bin(secret_path)
        self._length = len(self._secret)

        self._encrypted_img = None

        self._carrier_path = carrier_path
        self._secret_path = secret_path
        self._result_path = result_path
    
    @property
    def method(self):
        return self._method
    
    @method.setter
    def method(self, method: Method):
        self._method = method

    def PSNR(self):
        primary = np.array(
            self._img
        )

        encrypted = np.array(
            self._encrypted_img
        )

        MSE = np.mean(
            (primary - encrypted) ** 2
        )

        if MSE == 0:
            psnr = float('inf')
        else:
            psnr = 20 * np.log10(
                255 / np.sqrt(MSE)
            )

        # print("PSNRï¼š", psnr)

        # if psnr >= 50:
        #     print("åŠ å¯†å‰åå›¾åƒè¯¯å·®æå°")
        # elif psnr >= 30:
        #     print("éš¾ä»¥å¯Ÿè§‰åŠ å¯†å‰åå›¾åƒçš„è¯¯å·®")
        # elif psnr >= 20:
        #     print("äººçœ¼å¯ä»¥å¯Ÿè§‰åŠ å¯†å‰åå›¾åƒè¯¯å·®")
        # elif psnr >= 10:
        #     print("å­˜åœ¨æ˜æ˜¾çš„å›¾åƒå·®å¼‚ï¼Œä½†ä»å¯åˆ¤æ–­ä¸ºå¯èƒ½æ˜¯åŒä¸€å¼ å›¾ç‰‡")
        # else:
        #     print("å‹æ ¹å°±ä¸æ˜¯åŒä¸€å¼ å›¾")

        return psnr

    def SSIM(self):
        ssim = structural_similarity(self._img, self._encrypted_img)
        
        # print("SSIMï¼š", ssim)

        return ssim

    def Hamming(self, decrypted):
        res = hamming_loss(np.array(
            [
                int(x) for x in self._secret
            ]
        ), np.array(
            [
                int(x) for x in decrypted
            ]
        ))
        return res

    def run(self, **args):
        interval_step = args["interval_step"] if "interval_step" in args else 0
        check_size =  args["check_size"] if "check_size" in args else 0
        encrypted_img = self._method().encrypt(
            carrier_path=self._carrier_path,
            secret_path=self._secret_path,
            interval_step=interval_step,
            check_size=check_size
        )
        cv2.imwrite(self._result_path, encrypted_img, [cv2.IMWRITE_JPEG_QUALITY, 89])

        self._encrypted_img, shape = read_image.read_img_by_cv2(self._result_path)

        # if self._shape != shape:
        #     print("å›¾ç‰‡å°ºå¯¸ä¸ä¸€è‡´")

        psnr = self.PSNR()
        ssim = self.SSIM()

        bits = self._method().decrypt(
            self._length, 
            encrypted_img,
            "./decrypted.py",
            interval_step=interval_step,
            check_size=check_size
        )
        hamming = self.Hamming(bits)

        if hamming == 0:
            # print("è§£å¯†ç»“æœå®Œå…¨ä¸€è‡´")
            pass
        else:
            # print(hamming)
            pass

        return psnr, ssim, hamming

\end{lstlisting}

\section{ç­–ç•¥æ¨¡å¼ä¸‹ç®—æ³•çˆ¶ç±»}

\begin{lstlisting}[language=Python]%è®¾ç½®ä¸åŒè¯­è¨€å³å¯ã€‚
kk=2;[mdd,ndd]=size(dd); %åˆ é™¤äº†ä¼šæŠ¥é”™

class Method(ABC):
    @abstractmethod
    def encrypt(self, carrier_path, secret_path, **args):
        pass

    @abstractmethod
    def decrypt(self, length, img, result_path, **args) -> str:
        pass

    def back_process(self, path, bits) -> str:
        with open(path, "wb") as f:
            for i in range(0, len(bits), 8):
                ascii_code = int(bits[i:i+8], 2)
                ascii_code = chr(ascii_code)

                b = bytes(ascii_code, encoding="utf-8")
                f.write(b)
        return bits

\end{lstlisting}

\section{LSBç®—æ³•}

\begin{lstlisting}[language=Python]%è®¾ç½®ä¸åŒè¯­è¨€å³å¯ã€‚
kk=2;[mdd,ndd]=size(dd); %åˆ é™¤äº†ä¼šæŠ¥é”™

class LSB_Method(Method):

    def encrypt(self, carrier_path, secret_path, **args):
        img, shape = read_image.read_img_by_cv2(carrier_path)
        info = read_secret.read_secret_bin(secret_path)
        
        cnt = 0
        l = len(info)

        for h in range(0, shape[1]):
            for w in range(0, shape[0]):
                pix = img[w, h]

                if cnt >= l:
                    break

                pix = pix - pix % 2 + int(info[cnt])
                cnt += 1

                img[w, h] = pix
        
        return img
    
    def decrypt(self, length, img, result_path, **args) -> str:
        shape = img.shape

        cnt = 0
        bits = ""
        for h in range(0, shape[1]):
            for w in range(0, shape[0]):

                pix = img[w, h]

                bits += str(pix % 2)
                cnt += 1

                if cnt == length:
                    break
            
            if cnt == length:
                break

        return self.back_process(result_path, bits)

\end{lstlisting}

\section{éšæœºé—´éš”ç®—æ³•}

\begin{lstlisting}[language=Python]%è®¾ç½®ä¸åŒè¯­è¨€å³å¯ã€‚
kk=2;[mdd,ndd]=size(dd); %åˆ é™¤äº†ä¼šæŠ¥é”™

class LSB_RandomInterval(Method):

    def encrypt(self, carrier_path, secret_path, **args):
        img, shape = read_image.read_img_by_cv2(carrier_path)
        info = read_secret.read_secret_bin(secret_path)
        random.seed(2)
        
        cnt = 0
        l = len(info)
        step_max = int(shape[0] * shape[1] / l)

        if args["interval_step"] > step_max:
            raise Exception("æ­¥é•¿è®¾ç½®è¿‡å¤§")
        
        random_seq = [0] * l
        for i in range(0, l):
            random_seq[i] = int(random.random() * args["interval_step"] + 1)
        
        q = 1
        for cnt in range(l):
            w, h = convert_1d_2_2d.convert(q, shape[0])
            pix = img[w, h]
            pix = pix - pix % 2 + int(info[cnt])
            q = q + random_seq[cnt]
            img[w, h] = pix
        
        return img

    def decrypt(self, length, img, result_path, **args) -> str:
        random.seed(2)
        shape = img.shape

        cnt = 0
        bits = ""

        random_seq = [0] * length
        for i in range(0, length):
            random_seq[i] = int(random.random() * args["interval_step"] + 1)
        
        q = 1
        for cnt in range(length):
            w, h = convert_1d_2_2d.convert(q, img.shape[0])
            pix = img[w, h]
            bits += str(pix % 2)
            q += random_seq[cnt]
        
        return self.back_process(result_path, bits)


\end{lstlisting}

\section{åŒºåŸŸæ ¡éªŒä½ç®—æ³•}

\begin{lstlisting}[language=Python]%è®¾ç½®ä¸åŒè¯­è¨€å³å¯ã€‚
kk=2;[mdd,ndd]=size(dd); %åˆ é™¤äº†ä¼šæŠ¥é”™

class LSB_RegionalCheck(Method):

    def encrypt(self, carrier_path, secret_path, **args):
        img, shape = read_image.read_img_by_cv2(carrier_path)
        info = read_secret.read_secret_bin(secret_path)
        # random.seed(2)

        check_size = args["check_size"]

        cnt = 0
        l = len(info)

        q = 1
        size_max = int(shape[0] * shape[1] / l)
        if shape[0] * shape[1] < check_size * l:
            raise Exception("Check sizeè®¾ç½®è¿‡å¤§")

        pixels = list()
        for p in range(1, l + 1):
            for i in range(1, check_size + 1):
                w, h = convert_1d_2_2d.convert((p - 1) * check_size + i, shape[0])
                pixels.append(img[w, h])
            
            temp = 0
            for i, v in enumerate(pixels):
                temp += v % 2
            pixels = list()
            temp %= 2

            if temp != int(info[p - 1]):
                q = int(random.random() * check_size) + 1
                w, h = convert_1d_2_2d.convert((p - 1) * check_size + q, shape[0])
                pix = img[w, h]
                img[w, h] = pix - 1
        
        return img
    
    def decrypt(self, length, img, result_path, **args) -> str:
        check_size = args["check_size"]
        random.seed(2)
        shape = img.shape

        cnt = 0
        bits = ""

        pixels = list()
        for p in range(1, length + 1):
            for i in range(1, check_size + 1):
                w, h = convert_1d_2_2d.convert((p - 1) * check_size + i, img.shape[0])
                pixels.append(img[w, h])
            
            temp = 0
            for i, v in enumerate(pixels):
                temp += v % 2
            pixels = list()
            temp %= 2
            bits += str(temp)

        return self.back_process(result_path, bits)

\end{lstlisting}

\end{document}
